{"openapi":"3.0.1","info":{"title":"Contrato de GastroLog","version":"v1"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"3. Gestión de Restaurantes","description":"Endpoints para crear y buscar restaurantes."},{"name":"7. Favoritos","description":"Endpoints para gestionar los restaurantes favoritos de un usuario."},{"name":"5. Valoraciones","description":"Endpoints para crear y ver valoraciones."},{"name":"1. Autenticación","description":"Endpoints para registro, login y recuperación de cuenta."},{"name":"8. Perfil","description":"Endpoints para obtener datos combinados del perfil del usuario."},{"name":"6. Relaciones (Seguimiento)","description":"Endpoints para gestionar el sistema de seguimiento entre usuarios."},{"name":"2. Gestión de Usuarios","description":"Endpoints para gestionar perfiles de usuario (requiere autenticación)."}],"paths":{"/api/usuarios/perfil/foto":{"put":{"tags":["2. Gestión de Usuarios"],"summary":"Actualizar la foto de perfil del usuario autenticado","operationId":"actualizarFotoPerfil","requestBody":{"content":{"multipart/form-data":{"schema":{"required":["file"],"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"Foto de perfil actualizada con éxito","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsuarioResponseDTO"}}}},"400":{"description":"No se proporcionó ningún archivo","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"403":{"description":"Acceso denegado (sin token válido)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/usuarios/password":{"put":{"tags":["2. Gestión de Usuarios"],"summary":"Cambiar la contraseña del usuario autenticado","operationId":"changePassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChangeDTO"}}},"required":true},"responses":{"401":{"description":"La contraseña antigua es incorrecta","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Contraseña actualizada con éxito","content":{"*/*":{"schema":{"type":"string"}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/usuarios/nombre-usuario":{"put":{"tags":["2. Gestión de Usuarios"],"summary":"Actualizar el nombre","operationId":"actualizarNombreUsuario","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsuarioNombreUpdateDTO"}}},"required":true},"responses":{"200":{"description":"Nombre actualizado con éxito","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsuarioResponseDTO"}}}},"403":{"description":"Acceso denegado (sin token válido)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"400":{"description":"Datos inválidos o el nombre ya está en uso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/usuarios/email":{"put":{"tags":["2. Gestión de Usuarios"],"summary":"Actualizar el email","operationId":"actualizarEmail","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsuarioEmailUpdateDTO"}}},"required":true},"responses":{"400":{"description":"Datos inválidos o el email ya está en uso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"403":{"description":"Acceso denegado (sin token válido)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Email actualizado con éxito","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsuarioResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/valoraciones/usuario/{nombreUsuario}":{"post":{"tags":["5. Valoraciones"],"summary":"Crear una nueva valoración (protegido)","operationId":"crearValoracion","parameters":[{"name":"nombreUsuario","in":"path","required":true,"schema":{"type":"string"}},{"name":"valoracion","in":"query","required":true,"schema":{"type":"string"}},{"name":"files","in":"query","required":false,"schema":{"type":"array","items":{"type":"string","format":"binary"}}}],"responses":{"404":{"description":"Usuario o Restaurante no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"409":{"description":"Conflicto: El usuario ya ha valorado este restaurante","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"201":{"description":"Valoración creada con éxito","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ValoracionDTO"}}}},"403":{"description":"Acceso denegado (sin token válido)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/restaurantes":{"get":{"tags":["3. Gestión de Restaurantes"],"summary":"Buscar restaurantes en la base de datos local con filtros opcionales","operationId":"buscarRestaurantes","parameters":[{"name":"nombre","in":"query","required":false,"schema":{"type":"string"}},{"name":"ciudad","in":"query","required":false,"schema":{"type":"string"}},{"name":"tipo_cocina","in":"query","required":false,"schema":{"type":"string"}},{"name":"direccion","in":"query","required":false,"schema":{"type":"string"}},{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageRestauranteDTO"}}}}}},"post":{"tags":["3. Gestión de Restaurantes"],"summary":"Guardar un restaurante","operationId":"guardarRestaurante","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RestauranteDTO"}}},"required":true},"responses":{"201":{"description":"Restaurante creado con éxito","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RestauranteDTO"}}}},"400":{"description":"Datos inválidos en la petición","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"403":{"description":"Acceso denegado (sin token válido)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/restaurantes/sincronizar":{"post":{"tags":["3. Gestión de Restaurantes"],"summary":"Sincronizar con la API externa","operationId":"sincronizar","parameters":[{"name":"ciudad","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"504":{"description":"Timeout: la API externa tardó demasiado en responder","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Sincronización iniciada","content":{"*/*":{"schema":{"type":"string"}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/restaurantes/importar":{"post":{"tags":["3. Gestión de Restaurantes"],"summary":"Importa un restaurante desde la API externa a la BD local","operationId":"importarRestaurante","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RestauranteImportDTO"}}},"required":true},"responses":{"200":{"description":"Restaurante importado o encontrado con éxito","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RestauranteDTO"}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/relaciones/solicitudes/rechazar/{nombreEmisor}":{"post":{"tags":["6. Relaciones (Seguimiento)"],"summary":"Rechazar una solicitud de seguimiento","operationId":"rechazarSolicitud","parameters":[{"name":"nombreEmisor","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Solicitud o usuario emisor no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Solicitud rechazada","content":{"*/*":{"schema":{"type":"string"}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/relaciones/solicitudes/aceptar/{nombreEmisor}":{"post":{"tags":["6. Relaciones (Seguimiento)"],"summary":"Aceptar una solicitud de seguimiento","operationId":"aceptarSolicitud","parameters":[{"name":"nombreEmisor","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Solicitud aceptada","content":{"*/*":{"schema":{"type":"string"}}}},"404":{"description":"Solicitud o usuario emisor no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/relaciones/seguir/{nombreUsuario}":{"post":{"tags":["6. Relaciones (Seguimiento)"],"summary":"Enviar una solicitud para seguir a otro usuario","operationId":"solicitarSeguimiento","parameters":[{"name":"nombreUsuario","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Usuario a seguir no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Solicitud enviada con éxito","content":{"*/*":{"schema":{"type":"string"}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/favoritos/{restauranteId}":{"post":{"tags":["7. Favoritos"],"summary":"Añadir un restaurante a favoritos","operationId":"agregarFavorito","parameters":[{"name":"restauranteId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"404":{"description":"Restaurante no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Restaurante añadido a favoritos"}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["7. Favoritos"],"summary":"Eliminar un restaurante de favoritos","operationId":"eliminarFavorito","parameters":[{"name":"restauranteId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Restaurante eliminado de favoritos"},"404":{"description":"Restaurante no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/auth/reset-password":{"post":{"tags":["1. Autenticación"],"summary":"Restablecer la contraseña usando un token","operationId":"resetPassword","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}},"required":true},"responses":{"200":{"description":"Contraseña restablecida con éxito","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Token inválido o expirado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}}}},"/api/auth/register":{"post":{"tags":["1. Autenticación"],"summary":"Registrar un nuevo usuario","operationId":"registerUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsuarioRegistroDTO"}}},"required":true},"responses":{"409":{"description":"El email o nombre de usuario ya está registrado.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Usuario registrado con éxito","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsuarioResponseDTO"}}}},"400":{"description":"Datos de registro inválidos (ej. validación fallida)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}}}},"/api/auth/login":{"post":{"tags":["1. Autenticación"],"summary":"Iniciar sesión para obtener un token JWT","operationId":"createAuthenticationToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRequestDTO"}}},"required":true},"responses":{"403":{"description":"Acceso denegado: La cuenta está bloqueada o no verificada.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Login exitoso, devuelve el token JWT","content":{"*/*":{"schema":{"type":"object"}}}},"401":{"description":"Credenciales incorrectas (Email/contraseña no válidos)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}}}},"/api/auth/forgot-password":{"post":{"tags":["1. Autenticación"],"summary":"Solicitar restablecimiento de contraseña","operationId":"forgotPassword","requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}},"required":true},"responses":{"404":{"description":"Usuario no encontrado con el email proporcionado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Email de restablecimiento enviado si el usuario existe","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/valoraciones":{"get":{"tags":["5. Valoraciones"],"summary":"Obtener todas las valoraciones (público)","operationId":"obtenerTodasLasValoraciones","responses":{"200":{"description":"Lista de todas las valoraciones","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ValoracionDTO"}}}}}}}},"/api/valoraciones/feed":{"get":{"tags":["5. Valoraciones"],"summary":"Obtener el feed de reseñas de usuarios seguidos (protegido)","operationId":"obtenerFeed","parameters":[{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageValoracionDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/usuarios":{"get":{"tags":["2. Gestión de Usuarios"],"summary":"Obtener todos los usuarios (Rol de Admin conceptual)","operationId":"obtenerTodos","responses":{"200":{"description":"Lista de usuarios obtenida","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UsuarioResponseDTO"}}}}},"403":{"description":"Acceso denegado (sin token válido)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/usuarios/{nombreUsuario}/perfil":{"get":{"tags":["2. Gestión de Usuarios"],"summary":"Ver el perfil de otro usuario","operationId":"verPerfilDeUsuario","parameters":[{"name":"nombreUsuario","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Usuario no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Perfil del usuario","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserProfileDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/usuarios/{id}":{"get":{"tags":["2. Gestión de Usuarios"],"summary":"Obtener un usuario por su ID (Rol de Admin conceptual)","operationId":"obtenerPorId","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"usuario correcto","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsuarioResponseDTO"}}}},"400":{"description":"Datos inválidos","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"403":{"description":"Acceso denegado (sin token válido)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/usuarios/buscar":{"get":{"tags":["2. Gestión de Usuarios"],"summary":"Buscar usuarios por nombre de usuario","operationId":"buscarUsuarios","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Búsqueda exitosa","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UsuarioSimpleDTO"}}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/restaurantes/{id}":{"get":{"tags":["3. Gestión de Restaurantes"],"summary":"Obtener un restaurante por su ID (público)","operationId":"obtenerPorId_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Restaurante encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RestauranteDTO"}}}},"404":{"description":"Restaurante no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}}}},"/api/restaurantes/externos/buscar":{"get":{"tags":["3. Gestión de Restaurantes"],"summary":"Obtener los Restaurantes de la API","operationId":"obtenerRestaurantesExternos","parameters":[{"name":"nombre","in":"query","required":false,"schema":{"type":"string"}},{"name":"ciudad","in":"query","required":true,"schema":{"type":"string"}},{"name":"tipoCocina","in":"query","required":false,"schema":{"type":"string"}},{"name":"direccion","in":"query","required":false,"schema":{"type":"string"}},{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Búsqueda exitosa","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageElementoRestauranteDTO"}}}},"404":{"description":"Ciudad no encontrada en la API externa","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}}}},"/api/relaciones/{nombreUsuario}/siguiendo":{"get":{"tags":["6. Relaciones (Seguimiento)"],"summary":"Ver la lista de usuarios a los que sigue OTRO usuario","operationId":"obtenerSiguiendoDeUsuario","parameters":[{"name":"nombreUsuario","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Usuario no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Lista obtenida","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UsuarioSimpleDTO"}}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/relaciones/{nombreUsuario}/seguidores":{"get":{"tags":["6. Relaciones (Seguimiento)"],"summary":"Ver la lista de seguidores de OTRO usuario","operationId":"obtenerSeguidoresDeUsuario","parameters":[{"name":"nombreUsuario","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Usuario no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Lista obtenida","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UsuarioSimpleDTO"}}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/relaciones/solicitudes/pendientes":{"get":{"tags":["6. Relaciones (Seguimiento)"],"summary":"Ver la lista de solicitudes pendientes","operationId":"obtenerSolicitudesPendientes","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UsuarioSimpleDTO"}}}}}},"security":[{"bearerAuth":[]}]}},"/api/relaciones/siguiendo":{"get":{"tags":["6. Relaciones (Seguimiento)"],"summary":"Ver la lista de usuarios a los que TÚ sigues","operationId":"obtenerMisSiguiendo","responses":{"200":{"description":"Lista obtenida","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UsuarioSimpleDTO"}}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/relaciones/seguidores":{"get":{"tags":["6. Relaciones (Seguimiento)"],"summary":"Ver la lista de TUS PROPIOS seguidores","operationId":"obtenerMisSeguidores","responses":{"200":{"description":"Lista obtenida","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UsuarioSimpleDTO"}}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/perfil/me":{"get":{"tags":["8. Perfil"],"summary":"Obtener los datos completos del perfil del usuario autenticado","operationId":"getMyProfile","responses":{"200":{"description":"Datos del perfil","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProfileDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/favoritos":{"get":{"tags":["7. Favoritos"],"summary":"Obtener la lista de restaurantes favoritos del usuario autenticado","operationId":"obtenerMisFavoritos","parameters":[{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Lista de favoritos a continuacion","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageRestauranteDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/auth/verify":{"get":{"tags":["1. Autenticación"],"summary":"Verificar una nueva cuenta de usuario usando un token","operationId":"verifyUser","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Usuario verificado con éxito","content":{"*/*":{"schema":{"type":"string"}}}},"400":{"description":"Token inválido o expirado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}}}},"/api/valoraciones/{restauranteId}":{"delete":{"tags":["5. Valoraciones"],"summary":"Eliminar una valoración propia (protegido)","operationId":"eliminarValoracion","parameters":[{"name":"restauranteId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Valoración eliminada con éxito"},"404":{"description":"Valoración no encontrada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/usuarios/me":{"delete":{"tags":["2. Gestión de Usuarios"],"summary":"Dar de baja la cuenta del usuario autenticado","operationId":"darDeBajaMiCuenta","responses":{"200":{"description":"Cuenta dada de baja con éxito","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"403":{"description":"Acceso denegado (sin token válido)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/relaciones/seguidores/{nombreSeguidor}":{"delete":{"tags":["6. Relaciones (Seguimiento)"],"summary":"Eliminar un seguidor","operationId":"eliminarSeguidor","parameters":[{"name":"nombreSeguidor","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Seguidor eliminado","content":{"*/*":{"schema":{"type":"string"}}}},"404":{"description":"Seguidor no encontrado en tu lista","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/relaciones/dejar-de-seguir/{nombreUsuario}":{"delete":{"tags":["6. Relaciones (Seguimiento)"],"summary":"Dejar de seguir a un usuario (o cancelar una solicitud)","operationId":"dejarDeSeguir","parameters":[{"name":"nombreUsuario","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Usuario no encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}},"200":{"description":"Dejado de seguir con éxito","content":{"*/*":{"schema":{"type":"string"}}}},"403":{"description":"Acceso denegado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"ErrorResponseDTO":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}}},"UsuarioResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"nombreUsuario":{"type":"string"},"email":{"type":"string"},"fotoPerfilUrl":{"type":"string"}}},"PasswordChangeDTO":{"type":"object","properties":{"oldPassword":{"type":"string"},"newPassword":{"type":"string"}}},"UsuarioNombreUpdateDTO":{"required":["nombreUsuario"],"type":"object","properties":{"nombreUsuario":{"type":"string"}}},"UsuarioEmailUpdateDTO":{"required":["email"],"type":"object","properties":{"email":{"type":"string"}}},"RestauranteDTO":{"required":["ciudad","nombre","osmId"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"nombre":{"type":"string"},"direccion":{"type":"string"},"ciudad":{"type":"string"},"tipoCocina":{"type":"string"},"lat":{"type":"number","format":"double"},"lon":{"type":"number","format":"double"},"osmId":{"type":"integer","format":"int64"}}},"ValoracionDTO":{"type":"object","properties":{"restaurante":{"$ref":"#/components/schemas/RestauranteDTO"},"puntuacion":{"type":"integer","format":"int32"},"comentario":{"type":"string"},"nombreUsuario":{"type":"string"},"fotos":{"type":"array","items":{"type":"string"}}}},"RestauranteImportDTO":{"type":"object","properties":{"osmId":{"type":"integer","format":"int64"},"nombre":{"type":"string"},"ciudad":{"type":"string"},"direccion":{"type":"string"},"tipoCocina":{"type":"string"},"lat":{"type":"number","format":"double"},"lon":{"type":"number","format":"double"}}},"UsuarioRegistroDTO":{"type":"object","properties":{"nombreUsuario":{"type":"string"},"email":{"type":"string"},"pwd":{"type":"string"}}},"AuthRequestDTO":{"type":"object","properties":{"email":{"type":"string"},"pwd":{"type":"string"}}},"Pageable":{"type":"object","properties":{"page":{"minimum":0,"type":"integer","format":"int32"},"size":{"minimum":1,"type":"integer","format":"int32"},"sort":{"type":"array","items":{"type":"string"}}}},"PageValoracionDTO":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/ValoracionDTO"}},"number":{"type":"integer","format":"int32"},"sort":{"type":"array","items":{"$ref":"#/components/schemas/SortObject"}},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"type":"array","items":{"$ref":"#/components/schemas/SortObject"}},"unpaged":{"type":"boolean"},"paged":{"type":"boolean"},"pageSize":{"type":"integer","format":"int32"},"pageNumber":{"type":"integer","format":"int32"}}},"SortObject":{"type":"object","properties":{"direction":{"type":"string"},"nullHandling":{"type":"string"},"ascending":{"type":"boolean"},"property":{"type":"string"},"ignoreCase":{"type":"boolean"}}},"UserProfileDTO":{"type":"object","properties":{"nombreUsuario":{"type":"string"},"fotoPerfilUrl":{"type":"string"},"relationshipStatus":{"type":"string","enum":["PENDIENTE","ACEPTADO"]},"seguidosCount":{"type":"integer","format":"int32"},"seguidoresCount":{"type":"integer","format":"int32"},"valoraciones":{"type":"array","items":{"$ref":"#/components/schemas/ValoracionDTO"}},"private":{"type":"boolean"}}},"UsuarioSimpleDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"nombreUsuario":{"type":"string"}}},"PageRestauranteDTO":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/RestauranteDTO"}},"number":{"type":"integer","format":"int32"},"sort":{"type":"array","items":{"$ref":"#/components/schemas/SortObject"}},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"ElementoRestauranteDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"lat":{"type":"number","format":"double"},"lon":{"type":"number","format":"double"},"tags":{"type":"object","additionalProperties":{"type":"string"}}}},"PageElementoRestauranteDTO":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/ElementoRestauranteDTO"}},"number":{"type":"integer","format":"int32"},"sort":{"type":"array","items":{"$ref":"#/components/schemas/SortObject"}},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"ProfileDTO":{"type":"object","properties":{"nombreUsuario":{"type":"string"},"fotoPerfilUrl":{"type":"string"},"seguidosCount":{"type":"integer","format":"int32"},"seguidoresCount":{"type":"integer","format":"int32"},"solicitudesPendientesCount":{"type":"integer","format":"int32"},"valoraciones":{"type":"array","items":{"$ref":"#/components/schemas/ValoracionDTO"}}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}
